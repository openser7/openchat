(function(a){var b={};function c(e){if(b[e]){return b[e].exports}var d=b[e]={exports:{},id:e,loaded:false};a[e].call(d.exports,d,d.exports,c);d.loaded=true;return d.exports}c.m=a;c.c=b;c.p="";return c(0)})([function(b,a,c){var d;!(d=function(g){var i=c(1);var j=c(2);var f=c(3);var e=c(6);var h=c(7);i.sceditor=j;j.commands=c(9);j.defaultOptions=c(10);j.RangeHelper=c(4);j.dom=c(5);j.ie=e.ie;j.ios=e.ios;j.isWysiwygSupported=e.isWysiwygSupported;j.regexEscape=h.regex;j.escapeEntities=h.entities;j.escapeUriScheme=h.uriScheme;j.PluginManager=f;j.plugins=f.plugins;i.fn.sceditor=function(m){var n,k,l=[];m=m||{};if(!m.runWithoutWysiwygSupport&&!e.isWysiwygSupported){return}this.each(function(){n=this.jquery?this:i(this);k=n.data("sceditor");if(n.parents(".sceditor-container").length>0){return}if(m==="state"){l.push(!!k)}else{if(m==="instance"){l.push(k)}else{if(!k){(new j(this,m))}}}});if(!l.length){return this}return l.length===1?l[0]:i(l)}}.call(a,c,a,b),d!==undefined&&(b.exports=d))},function(b,a){b.exports=jQuery},function(b,a,c){var d;!(d=function(g){var k=c(1);var j=c(3);var o=c(4);var i=c(5);var r=c(7);var l=c(6);var n=c(8);var m=window;var p=document;var e=k(m);var h=k(p);var q=l.ie;var s=q&&q<11;var f=function(aE,ae){var U=this;var ah=aE.get?aE.get(0):aE;var aD=k(ah);var aj;var I;var ax;var ag;var ak;var aq;var u;var aw;var P;var at;var ab;var x=[];var az;var H=[];var w=[];var T;var av;var V;var aI;var N;var ap;var ao;var aJ={};var Q=[];var X={};var v;var aB,K,B,aK,an,aa,G,ad,aH,F,t,z,ay,am,C,af,E,R,O,A,y,S,aF,ac,W,M,Z,au,L,al,aA,J,D,ar,ai,aG,aC,Y;U.commands=k.extend(true,{},(ae.commands||f.commands));U.opts=ae=k.extend({},f.defaultOptions,ae);aB=function(){aD.data("sceditor",U);k.each(ae,function(aM,aN){if(k.isPlainObject(aN)){ae[aM]=k.extend(true,{},aN)}});if(ae.locale&&ae.locale!=="en"){G()}aj=k('<div class="sceditor-container" />').insertAfter(aD).css("z-index",ae.zIndex);if(q){aj.addClass("ie ie"+q)}ap=!!aD.attr("required");aD.removeAttr("required");aa();ay();ad();an(!!ae.startInSourceMode);t();aH();F();if(!l.isWysiwygSupported){U.toggleSourceMode()}M();var aL=function(){e.off("load",aL);if(ae.autofocus){aA()}if(ae.autoExpand){U.expandToContent()}ac();T.call("ready")};e.on("load",aL);if(p.readyState&&p.readyState==="complete"){aL()}};aa=function(){var aL=ae.plugins;aL=aL?aL.toString().split(","):[];T=new j(U);k.each(aL,function(aM,aN){T.register(k.trim(aN))})};G=function(){var aL;ab=f.locale[ae.locale];if(!ab){aL=ae.locale.split("-");ab=f.locale[aL[0]]}if(ab&&ab.dateFormat){ae.dateFormat=ab.dateFormat}};an=function(aM){var aN,aL;u=k("<textarea></textarea>");ax=k('<iframe frameborder="0" allowfullscreen="true"></iframe>');if(aM){aj.addClass("sourceMode");ax.hide()}else{aj.addClass("wysiwygMode");u.hide()}if(!ae.spellcheck){u.attr("spellcheck","false")}if(m.location.protocol==="https:"){ax.attr("src","javascript:false")}aj.append(ax).append(u);ag=ax[0];aw=u[0];U.dimensions(ae.width||aD.width(),ae.height||aD.height());aN=am();aN.open();aN.write(n("html",{attrs:q?' class="ie ie'+q+'"':"",spellcheck:ae.spellcheck?"":'spellcheck="false"',charset:ae.charset,style:ae.style}));aN.close();aq=k(aN);ak=k(aN.body);U.readOnly(!!ae.readOnly);if(l.ios||q){ak.height("100%");if(!q){ak.on("touchend",U.focus)}}aL=aD.attr("tabindex");u.attr("tabindex",aL);ax.attr("tabindex",aL);az=new o(ag.contentWindow);U.val(aD.hide().val())};aH=function(){if(ae.autoUpdate){ak.on("blur",Y);u.on("blur",Y)}if(ae.rtl===null){ae.rtl=u.css("direction")==="rtl"}U.rtl(!!ae.rtl);if(ae.autoExpand){aq.on("keyup",U.expandToContent)}if(ae.resizeEnabled){z()}aj.attr("id",ae.id);U.emoticons(ae.emoticonsEnabled)};F=function(){var aL=q?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";var aM="keydown keyup keypress focus blur contextmenu";h.click(aF);k(ah.form).on("reset",A).submit(U.updateOriginal);e.on("resize orientationChanged",ac);ak.keypress(O).keydown(E).keydown(R).keyup(au).blur(aG).keyup(aC).on("paste",C).on(aL,L).on(aM,S);if(ae.emoticonsCompat&&m.getSelection){ak.keyup(D)}u.blur(aG).keyup(aC).keydown(E).on(aM,S);aq.mousedown(y).blur(aG).on(aL,L).on("beforedeactivate keyup mouseup",aK).keyup(au).focus(function(){at=null});aj.on("selectionchanged",al).on("selectionchanged",M).on("selectionchanged valuechanged nodechanged",S)};ad=function(){var aO,aM=U.commands,aN=(ae.toolbarExclude||"").split(","),aL=ae.toolbar.split("|");I=k('<div class="sceditor-toolbar" unselectable="on" />');k.each(aL,function(aP,aQ){aO=k('<div class="sceditor-group" />');k.each(aQ.split(","),function(aS,aT){var aU,aR,aV=aM[aT];if(!aV||k.inArray(aT,aN)>-1){return}aR=aV.shortcut;aU=n("toolbarButton",{name:aT,dispName:U._(aV.name||aV.tooltip||aT)},true);aU.data("sceditor-txtmode",!!aV.txtExec).data("sceditor-wysiwygmode",!!aV.exec).toggleClass("disabled",!aV.exec).mousedown(function(){if(!q||q<9){v=true}}).click(function(){var aW=k(this);if(!aW.hasClass("disabled")){B(aW,aV)}M();return false});if(aV.tooltip){aU.attr("title",U._(aV.tooltip)+(aR?" ("+aR+")":""))}if(aR){U.addShortcut(aR,aT)}if(aV.state){w.push({name:aT,state:aV.state})}else{if(typeof aV.exec==="string"){w.push({name:aT,state:aV.exec})}}aO.append(aU);X[aT]=aU});if(aO[0].firstChild){I.append(aO)}});k(ae.toolbarContainer||aj).append(I)};t=function(){k.each(U.commands,function(aL,aM){if(aM.forceNewLineAfter&&k.isArray(aM.forceNewLineAfter)){H=k.merge(H,aM.forceNewLineAfter)}});au()};z=function(){var aN,aX,aS,aZ,aR,aP,a4=k('<div class="sceditor-grip" />'),aQ=k('<div class="sceditor-resize-cover" />'),a2="touchmove mousemove",aL="touchcancel touchend mouseup",a0=0,aY=0,a3=0,a1=0,aV=0,aW=0,aU=aj.width(),aT=aj.height(),aO=false,aM=U.rtl();aN=ae.resizeMinHeight||aT/1.5;aX=ae.resizeMaxHeight||aT*2.5;aS=ae.resizeMinWidth||aU/1.25;aZ=ae.resizeMaxWidth||aU*1.25;aR=function(a7){if(a7.type==="touchmove"){a7=m.event;a3=a7.changedTouches[0].pageX;a1=a7.changedTouches[0].pageY}else{a3=a7.pageX;a1=a7.pageY}var a5=aW+(a1-aY),a6=aM?aV-(a3-a0):aV+(a3-a0);if(aZ>0&&a6>aZ){a6=aZ}if(aS>0&&a6<aS){a6=aS}if(!ae.resizeWidth){a6=false}if(aX>0&&a5>aX){a5=aX}if(aN>0&&a5<aN){a5=aN}if(!ae.resizeHeight){a5=false}if(a6||a5){U.dimensions(a6,a5);if(q<7){aj.height(a5)}}a7.preventDefault()};aP=function(a5){if(!aO){return}aO=false;aQ.hide();aj.removeClass("resizing").height("auto");h.off(a2,aR);h.off(aL,aP);a5.preventDefault()};aj.append(a4);aj.append(aQ.hide());a4.on("touchstart mousedown",function(a5){if(a5.type==="touchstart"){a5=m.event;a0=a5.touches[0].pageX;aY=a5.touches[0].pageY}else{a0=a5.pageX;aY=a5.pageY}aV=aj.width();aW=aj.height();aO=true;aj.addClass("resizing");aQ.show();h.on(a2,aR);h.on(aL,aP);if(q<7){aj.height(aW)}a5.preventDefault()})};ay=function(){var aM,aN=ae.emoticons,aL=ae.emoticonsRoot;if(!k.isPlainObject(aN)||!ae.emoticonsEnabled){return}k.each(aN,function(aO,aP){k.each(aP,function(aR,aQ){if(aL){aQ={url:aL+(aQ.url||aQ),tooltip:aQ.tooltip||aR};aN[aO][aR]=aQ}aM=p.createElement("img");aM.src=aQ.url||aQ;x.push(aM)})})};aA=function(){var aN,aM,aQ=aq[0],aL=ak[0],aP=aL.firstChild,aO=!!ae.autofocusEnd;if(!aj.is(":visible")){return}if(U.sourceMode()){aM=aO?aw.value.length:0;if(aw.setSelectionRange){aw.setSelectionRange(aM,aM)}else{aN=aw.createTextRange();aN.moveEnd("character",aM);aN.collapse(false);aN.select()}return}i.removeWhiteSpace(aL);if(aO){if(!(aP=aL.lastChild)){aP=aQ.createElement("p");ak.append(aP)}while(aP.lastChild){aP=aP.lastChild;if(!s&&k(aP).is("br")&&aP.previousSibling){aP=aP.previousSibling}}}if(aQ.createRange){aN=aQ.createRange();if(!i.canHaveChildren(aP)){aN.setStartBefore(aP);if(aO){aN.setStartAfter(aP)}}else{aN.selectNodeContents(aP)}}else{aN=aL.createTextRange();aN.moveToElementText(aP.nodeType!==3?aP:aP.parentNode)}aN.collapse(!aO);az.selectRange(aN);aI=aN;if(aO){aq.scrollTop(aL.scrollHeight);ak.scrollTop(aL.scrollHeight)}U.focus()};U.readOnly=function(aL){if(typeof aL!=="boolean"){return u.attr("readonly")==="readonly"}ak[0].contentEditable=!aL;if(!aL){u.removeAttr("readonly")}else{u.attr("readonly","readonly")}W(aL);return U};U.rtl=function(aM){var aL=aM?"rtl":"ltr";if(typeof aM!=="boolean"){return u.attr("dir")==="rtl"}ak.attr("dir",aL);u.attr("dir",aL);aj.removeClass("rtl").removeClass("ltr").addClass(aL);return U};W=function(aL){var aM=U.inSourceMode()?"txtmode":"wysiwygmode";k.each(X,function(aN,aO){if(aL===true||!aO.data("sceditor-"+aM)){aO.addClass("disabled")}else{aO.removeClass("disabled")}})};U.width=function(aL,aM){if(!aL&&aL!==0){return aj.width()}U.dimensions(aL,null,aM);return U};U.dimensions=function(aO,aL,aP){var aM=q<8||p.documentMode<8?2:0;var aN;aO=(!aO&&aO!==0)?false:aO;aL=(!aL&&aL!==0)?false:aL;if(aO===false&&aL===false){return{width:U.width(),height:U.height()}}if(ax.data("outerWidthOffset")===aN){U.updateStyleCache()}if(aO!==false){if(aP!==false){ae.width=aO}if(aL===false){aL=aj.height();aP=false}aj.width(aO);if(aO&&aO.toString().indexOf("%")>-1){aO=aj.width()}ax.width(aO-ax.data("outerWidthOffset"));u.width(aO-u.data("outerWidthOffset"));if(l.ios&&ak){ak.width(aO-ax.data("outerWidthOffset")-(ak.outerWidth(true)-ak.width()))}}if(aL!==false){if(aP!==false){ae.height=aL}if(aL&&aL.toString().indexOf("%")>-1){aL=aj.height(aL).height();aj.height("auto")}aL-=!ae.toolbarContainer?I.outerHeight(true):0;ax.height(aL-ax.data("outerHeightOffset"));u.height(aL-aM-u.data("outerHeightOffset"))}return U};U.updateStyleCache=function(){ax.data("outerWidthOffset",ax.outerWidth(true)-ax.width());u.data("outerWidthOffset",u.outerWidth(true)-u.width());ax.data("outerHeightOffset",ax.outerHeight(true)-ax.height());u.data("outerHeightOffset",u.outerHeight(true)-u.height())};U.height=function(aL,aM){if(!aL&&aL!==0){return aj.height()}U.dimensions(null,aL,aM);return U};U.maximize=function(aL){if(typeof aL==="undefined"){return aj.is(".sceditor-maximize")}aL=!!aL;if(q<7){k("html, body").toggleClass("sceditor-maximize",aL)}aj.toggleClass("sceditor-maximize",aL);U.width(aL?"100%":ae.width,false);U.height(aL?"100%":ae.height,false);return U};U.expandToContent=function(aN){var aP=aj.height(),aO=(aP-ax.height()),aL=ak[0].scrollHeight||aq[0].documentElement.scrollHeight,aM=ae.resizeMaxHeight||((ae.height||aD.height())*2);aL+=aO;if((aN===true||aL<=aM)&&aL>aP){U.height(aL)}};U.destroy=function(){if(!T){return}T.destroy();az=null;at=null;T=null;if(P){P.off().remove()}h.off("click",aF);e.off("resize orientationChanged",ac);k(ah.form).off("reset",A).off("submit",U.updateOriginal);ak.off();aq.off().find("*").remove();u.off().remove();I.remove();aj.off().find("*").off().remove();aj.remove();aD.removeData("sceditor").removeData("sceditorbbcode").show();if(ap){aD.attr("required","required")}};U.createDropDown=function(aQ,aN,aR,aP){var aO,aL="sceditor-"+aN,aM=P&&P.is("."+aL);U.closeDropDown(true);if(aM){return}if(aP!==false){k(aR).find(":not(input,textarea)").filter(function(){return this.nodeType===1}).attr("unselectable","on")}aO={top:aQ.offset().top,left:aQ.offset().left,marginTop:aQ.outerHeight()};k.extend(aO,ae.dropDownCss);P=k('<div class="sceditor-dropdown '+aL+'" />').css(aO).append(aR).appendTo(k("body")).on("click focusin",function(aS){aS.stopPropagation()});setTimeout(function(){if(P){P.find("input,textarea").first().focus()}})};aF=function(aL){if(aL.which!==3&&P){Y();U.closeDropDown()}};C=function(aQ){var aP,aS,aL,aR=ak[0],aU=aq[0],aO=0,aN=p.createElement("div"),aT=aU.createDocumentFragment(),aM=aQ?aQ.clipboardData:false;if(ae.disablePasting){return false}if(!ae.enablePasteFiltering){return}az.saveRange();p.body.appendChild(aN);if(aM&&aM.getData){if((aP=aM.getData("text/html"))||(aP=aM.getData("text/plain"))){aN.innerHTML=aP;af(aR,aN);return false}}aL=ak.scrollTop()||aq.scrollTop();while(aR.firstChild){aT.appendChild(aR.firstChild)}aS=function(aW,aV){if(aW.childNodes.length>0||aO>25){while(aW.firstChild){aV.appendChild(aW.firstChild)}while(aT.firstChild){aW.appendChild(aT.firstChild)}ak.scrollTop(aL);aq.scrollTop(aL);if(aV.childNodes.length>0){af(aW,aV)}else{az.restoreRange()}}else{aO++;setTimeout(function(){aS(aW,aV)},20)}};aS(aR,aN);U.focus();return true};af=function(aN,aM){i.fixNesting(aM);var aL=aM.innerHTML;if(T.hasHandler("toSource")){aL=T.callOnlyFirst("toSource",aL,k(aM))}aM.parentNode.removeChild(aM);if(T.hasHandler("toWysiwyg")){aL=T.callOnlyFirst("toWysiwyg",aL,true)}az.restoreRange();U.wysiwygEditorInsertHtml(aL,null,true)};U.closeDropDown=function(aL){if(P){P.off().remove();P=null}if(aL===true){U.focus()}};am=function(){if(ag.contentDocument){return ag.contentDocument}if(ag.contentWindow&&ag.contentWindow.document){return ag.contentWindow.document}return ag.document};U.wysiwygEditorInsertHtml=function(aP,aR,aO){var aN,aQ,aM,aL=ax.height();U.focus();if(!aO&&(k(V).is("code")||k(V).parents("code").length!==0)){return}az.insertHTML(aP,aR);az.saveRange();K(ak[0]);aN=ak.find("#sceditor-end-marker").show();aQ=ak.scrollTop()||aq.scrollTop();aM=(i.getOffset(aN[0]).top+(aN.outerHeight(true)*1.5))-aL;aN.hide();if(aM>aQ||aM+aL<aQ){ak.scrollTop(aM);aq.scrollTop(aM)}ai(false);az.restoreRange();au()};U.wysiwygEditorInsertText=function(aM,aL){U.wysiwygEditorInsertHtml(r.entities(aM),r.entities(aL))};U.insertText=function(aM,aL){if(U.inSourceMode()){U.sourceEditorInsertText(aM,aL)}else{U.wysiwygEditorInsertText(aM,aL)}return U};U.sourceEditorInsertText=function(aR,aO){var aL,aQ,aP,aN=aw.selectionStart,aM=aw.selectionEnd;aQ=aw.scrollTop;aw.focus();if(typeof aN!=="undefined"){aP=aw.value;if(aO){aR+=aP.substring(aN,aM)+aO}aw.value=aP.substring(0,aN)+aR+aP.substring(aM,aP.length);aw.selectionStart=(aN+aR.length)-(aO?aO.length:0);aw.selectionEnd=aw.selectionStart}else{aL=p.selection.createRange();if(aO){aR+=aL.text+aO}aL.text=aR;if(aO){aL.moveEnd("character",0-aO.length)}aL.moveStart("character",aL.End-aL.Start);aL.select()}aw.scrollTop=aQ;aw.focus();ai()};U.getRangeHelper=function(){return az};U.sourceEditorCaret=function(aL){var aM,aN={};aw.focus();if(typeof aw.selectionStart!=="undefined"){if(aL){aw.selectionStart=aL.start;aw.selectionEnd=aL.end}else{aN.start=aw.selectionStart;aN.end=aw.selectionEnd}}else{aM=p.selection.createRange();if(aL){aM.moveEnd("character",aL.end);aM.moveStart("character",aL.start);aM.select()}else{aN.start=aM.Start;aN.end=aM.End}}return aL?this:aN};U.val=function(aM,aL){if(typeof aM!=="string"){return U.inSourceMode()?U.getSourceEditorValue(false):U.getWysiwygEditorValue(aL)}if(!U.inSourceMode()){if(aL!==false&&T.hasHandler("toWysiwyg")){aM=T.callOnlyFirst("toWysiwyg",aM)}U.setWysiwygEditorValue(aM)}else{U.setSourceEditorValue(aM)}return U};U.insert=function(aR,aM,aP,aO,aQ){if(U.inSourceMode()){U.sourceEditorInsertText(aR,aM);return U}if(aM){var aN=az.selectedHtml(),aL=k("<div>").appendTo(k("body")).hide().html(aN);if(aP!==false&&T.hasHandler("toSource")){aN=T.callOnlyFirst("toSource",aN,aL)}aL.remove();aR+=aN+aM}if(aP!==false&&T.hasHandler("toWysiwyg")){aR=T.callOnlyFirst("toWysiwyg",aR,true)}if(aP!==false&&aQ===true){aR=aR.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}U.wysiwygEditorInsertHtml(aR);return U};U.getWysiwygEditorValue=function(aM){var aL;var aN=k("<div>").appendTo(document.body).append(k(ak[0].childNodes).clone());i.fixNesting(aN[0]);aL=aN.html();if(aM!==false&&T.hasHandler("toSource")){aL=T.callOnlyFirst("toSource",aL,aN)}aN.remove();return aL};U.getBody=function(){return ak};U.getContentAreaContainer=function(){return ax};U.getSourceEditorValue=function(aL){var aM=u.val();if(aL!==false&&T.hasHandler("toWysiwyg")){aM=T.callOnlyFirst("toWysiwyg",aM)}return aM};U.setWysiwygEditorValue=function(aL){if(!aL){aL="<p>"+(q?"":"<br />")+"</p>"}ak[0].innerHTML=aL;K(ak[0]);au();ai()};U.setSourceEditorValue=function(aL){u.val(aL);ai()};U.updateOriginal=function(){aD.val(U.val())};K=function(aP){if(!ae.emoticonsEnabled||k(aP).parents("code").length){return}var aR=aP.ownerDocument,aM="\\s|\xA0|\u2002|\u2003|\u2009|&nbsp;",aL=[],aQ=[],aO=k.extend({},ae.emoticons.more,ae.emoticons.dropdown,ae.emoticons.hidden);k.each(aO,function(aS){if(ae.emoticonsCompat){aQ[aS]=new RegExp("(>|^|"+aM+")"+r.regex(aS)+"($|<|"+aM+")")}aL.push(aS)});var aN=function(aT){aT=aT.firstChild;while(aT){var aV,a0,aY,a1,aU,aW,aZ,aS=aT.parentNode,aX=aT.nodeValue;if(aT.nodeType!==3){if(!k(aT).is("code")){aN(aT)}}else{if(aX){aU=aL.length;while(aU--){a0=aL[aU];aZ=ae.emoticonsCompat?aX.search(aQ[a0]):aX.indexOf(a0);if(aZ>-1){aW=aT.nextSibling;aY=aO[a0];aV=aX.substr(aZ).split(a0);aX=aX.substr(0,aZ)+aV.shift();aT.nodeValue=aX;a1=i.parseHTML(n("emoticon",{key:a0,url:aY.url||aY,tooltip:aY.tooltip||a0}),aR);aS.insertBefore(a1[0],aW);aS.insertBefore(aR.createTextNode(aV.join(a0)),aW)}}}}aT=aT.nextSibling}};aN(aP);if(ae.emoticonsCompat){Q=ak.find("img[data-sceditor-emoticon]")}};U.inSourceMode=function(){return aj.hasClass("sourceMode")};U.sourceMode=function(aL){var aM=U.inSourceMode();if(typeof aL!=="boolean"){return aM}if((aM&&!aL)||(!aM&&aL)){U.toggleSourceMode()}return U};U.toggleSourceMode=function(){var aL=U.inSourceMode();if(!l.isWysiwygSupported&&aL){return}if(!aL){az.saveRange();az.clear()}U.blur();if(aL){U.setWysiwygEditorValue(U.getSourceEditorValue())}else{U.setSourceEditorValue(U.getWysiwygEditorValue())}at=null;u.toggle();ax.toggle();aj.toggleClass("wysiwygMode",aL).toggleClass("sourceMode",!aL);W();M()};Z=function(){aw.focus();if(typeof aw.selectionStart!=="undefined"){return aw.value.substring(aw.selectionStart,aw.selectionEnd)}else{return p.selection.createRange().text}};B=function(aL,aM){if(U.inSourceMode()){if(aM.txtExec){if(k.isArray(aM.txtExec)){U.sourceEditorInsertText.apply(U,aM.txtExec)}else{aM.txtExec.call(U,aL,Z())}}}else{if(aM.exec){if(k.isFunction(aM.exec)){aM.exec.call(U,aL)}else{U.execCommand(aM.exec,aM.hasOwnProperty("execParam")?aM.execParam:null)}}}};aK=function(){if(q){at=az.selectedRange()}};U.execCommand=function(aP,aO){var aN=false,aL=U.commands[aP],aQ=k(az.parentNode());U.focus();if(aQ.is("code")||aQ.parents("code").length!==0){return}try{aN=aq[0].execCommand(aP,false,aO)}catch(aM){}if(!aN&&aL&&aL.errorMessage){alert(U._(aL.errorMessage))}M()};L=function(){function aL(){if(az&&!az.compare(aI)){aI=az.cloneSelected();aj.trigger(k.Event("selectionchanged"))}N=false}if(N){return}N=true;if(q){aL()}else{setTimeout(aL,100)}};al=function(){var aM,aL=az.parentNode();if(av!==aL){aM=av;av=aL;V=az.getFirstBlockParent(aL);aj.trigger(k.Event("nodechanged",{oldNode:aM,newNode:av}))}};U.currentNode=function(){return av};U.currentBlockNode=function(){return V};M=function(aO){var aW,aU;var aR="active";var aT=aq[0];var aQ=U.sourceMode();if(U.readOnly()){I.find(aR).removeClass(aR);return}if(!aQ){aU=aO?aO.newNode:az.parentNode();aW=az.getFirstBlockParent(aU)}for(var aN=0;aN<w.length;aN++){var aL=0;var aS=X[w[aN].name];var aM=w[aN].state;var aV=(aQ&&!aS.data("sceditor-txtmode"))||(!aQ&&!aS.data("sceditor-wysiwygmode"));if(typeof aM==="string"){if(!aQ){try{aL=aT.queryCommandEnabled(aM)?0:-1;if(aL>-1){aL=aT.queryCommandState(aM)?1:0}}catch(aP){}}}else{if(!aV){aL=aM.call(U,aU,aW)}}aS.toggleClass("disabled",aV||aL<0).toggleClass(aR,aL>0)}};O=function(aP){var aR,aN,aM,aO;var aQ="code,blockquote,pre";var aL="li,ul,ol";if(aP.originalEvent.defaultPrevented){return}U.closeDropDown();aR=k(V).closest(aQ+","+aL).first();if(aP.which===13&&aR.length&&!aR.is(aL)){at=null;aN=aq[0].createElement("br");az.insertNode(aN);if(!s){aM=aN.parentNode;aO=aM.lastChild;if(aO&&aO.nodeType===3&&aO.nodeValue===""){aM.removeChild(aO);aO=aM.lastChild}if(!i.isInline(aM,true)&&aO===aN&&i.isInline(aN.previousSibling)){az.insertHTML("<br>")}}return false}};au=function(){var aN,aM,aO,aL=ak[0];i.rTraverse(aL,function(aP){aN=aP.nodeName.toLowerCase();if(k.inArray(aN,H)>-1){aM=true}if((aP.nodeType===3&&!/^\s*$/.test(aP.nodeValue))||aN==="br"||(s&&!aP.firstChild&&!i.isInline(aP,false))){if(aM){aO=aq[0].createElement("p");aO.className="sceditor-nlf";aO.innerHTML=!s?"<br />":"";aL.appendChild(aO)}return false}})};A=function(){U.val(aD.val())};y=function(){U.closeDropDown();at=null};ac=function(){var aL=ae.height,aM=ae.width;if(!U.maximize()){if((aL&&aL.toString().indexOf("%")>-1)||(aM&&aM.toString().indexOf("%")>-1)){U.dimensions(aM,aL)}}else{U.dimensions("100%","100%",false)}};U._=function(){var aM,aL=arguments;if(ab&&ab[aL[0]]){aL[0]=ab[aL[0]]}return aL[0].replace(/\{(\d+)\}/g,function(aO,aN){return aL[aN-0+1]!==aM?aL[aN-0+1]:"{"+aN+"}"})};S=function(aN){T.call(aN.type+"Event",aN,U);var aM=aN.target===aw?"scesrc":"scewys";var aL=k.Event(aN);aL.type=aM+aN.type;aj.trigger(aL,U)};U.bind=function(aM,aO,aP,aN){aM=aM.split(" ");var aL=aM.length;while(aL--){if(k.isFunction(aO)){if(!aP){aj.on("scewys"+aM[aL],aO)}if(!aN){aj.on("scesrc"+aM[aL],aO)}if(aM[aL]==="valuechanged"){ai.hasHandler=true}}}return U};U.unbind=function(aM,aO,aP,aN){aM=aM.split(" ");var aL=aM.length;while(aL--){if(k.isFunction(aO)){if(!aP){aj.off("scewys"+aM[aL],aO)}if(!aN){aj.off("scesrc"+aM[aL],aO)}}}return U};U.blur=function(aM,aN,aL){if(k.isFunction(aM)){U.bind("blur",aM,aN,aL)}else{if(!U.sourceMode()){ak.blur()}else{u.blur()}}return U};U.focus=function(aO,aP,aN){if(k.isFunction(aO)){U.bind("focus",aO,aP,aN)}else{if(!U.inSourceMode()){var aM,aL=az.selectedRange();if(!aI&&!az.hasSelection()){aA()}if(!s&&aL&&aL.endOffset===1&&aL.collapsed){aM=aL.endContainer;if(aM&&aM.childNodes.length===1&&k(aM.firstChild).is("br")){aL.setStartBefore(aM.firstChild);aL.collapse(true);az.selectRange(aL)}}ag.contentWindow.focus();ak[0].focus();if(at){az.selectRange(at);at=null}}else{aw.focus()}}M();return U};U.keyDown=function(aM,aN,aL){return U.bind("keydown",aM,aN,aL)};U.keyPress=function(aM,aN,aL){return U.bind("keypress",aM,aN,aL)};U.keyUp=function(aM,aN,aL){return U.bind("keyup",aM,aN,aL)};U.nodeChanged=function(aL){return U.bind("nodechanged",aL,false,true)};U.selectionChanged=function(aL){return U.bind("selectionchanged",aL,false,true)};U.valueChanged=function(aM,aN,aL){return U.bind("valuechanged",aM,aN,aL)};J=function(aO){return;var aP,aM=0,aN=U.emoticonsCache,aL=String.fromCharCode(aO.which);if(k(V).is("code")||k(V).parents("code").length){return}if(!aN){aN=[];k.each(k.extend({},ae.emoticons.more,ae.emoticons.dropdown,ae.emoticons.hidden),function(aR,aQ){aN[aM++]=[aR,n("emoticon",{key:aR,url:aQ.url||aQ,tooltip:aQ.tooltip||aR})]});aN.sort(function(aR,aQ){return aR[0].length-aQ[0].length});U.emoticonsCache=aN;U.longestEmoticonCode=aN[aN.length-1][0].length}aP=az.replaceKeyword(U.emoticonsCache,true,true,U.longestEmoticonCode,ae.emoticonsCompat,aL);if(aP&&ae.emoticonsCompat){Q=ak.find("img[data-sceditor-emoticon]");return/^\s$/.test(aL)}return !aP};D=function(){if(!Q.length){return}var aM,aQ,aS,aR,aP,aN,aO=U.currentBlockNode(),aT=false,aL=/[^\s\xA0\u2002\u2003\u2009\u00a0]+/;Q=k.map(Q,function(aU){if(!aU||!aU.parentNode){return null}if(!k.contains(aO,aU)){return aU}aM=aU.previousSibling;aQ=aU.nextSibling;aP=aM.nodeValue;if(aP===null){aP=aM.innerText||""}if((!aM||!aL.test(aM.nodeValue.slice(-1)))&&(!aQ||!aL.test((aQ.nodeValue||"")[0]))){return aU}aS=aU.parentNode;aR=az.cloneSelected();aN=aR.startContainer;aP=aP+k(aU).data("sceditor-emoticon");if(aN===aQ){aT=aP.length+aR.startOffset}else{if(aN===aO&&aO.childNodes[aR.startOffset]===aQ){aT=aP.length}else{if(aN===aM){aT=aR.startOffset}}}if(!aQ||aQ.nodeType!==3){aQ=aS.insertBefore(aS.ownerDocument.createTextNode(""),aQ)}aQ.insertData(0,aP);aS.removeChild(aM);aS.removeChild(aU);if(aT!==false){aR.setStart(aQ,aT);aR.collapse(true);az.selectRange(aR)}return null})};U.emoticons=function(aL){if(!aL&&aL!==false){return ae.emoticonsEnabled}ae.emoticonsEnabled=aL;if(aL){ak.keypress(J);if(!U.sourceMode()){az.saveRange();K(ak[0]);Q=ak.find("img[data-sceditor-emoticon]");ai(false);az.restoreRange()}}else{ak.find("img[data-sceditor-emoticon]").replaceWith(function(){return k(this).data("sceditor-emoticon")});Q=[];ak.off("keypress",J);ai()}return U};U.css=function(aL){if(!ao){ao=k('<style id="#inline" />',aq[0]).appendTo(aq.find("head"))[0]}if(typeof aL!=="string"){return ao.styleSheet?ao.styleSheet.cssText:ao.innerHTML}if(ao.styleSheet){ao.styleSheet.cssText=aL}else{ao.innerHTML=aL}return U};E=function(aQ){var aL=[],aO={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},aN={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},aM={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},aR=aQ.which,aP=aN[aR]||String.fromCharCode(aR).toLowerCase();if(aQ.ctrlKey||aQ.metaKey){aL.push("ctrl")}if(aQ.altKey){aL.push("alt")}if(aQ.shiftKey){aL.push("shift");if(aM[aR]){aP=aM[aR]}else{if(aO[aP]){aP=aO[aP]}}}if(aP&&(aR<16||aR>18)){aL.push(aP)}aL=aL.join("+");if(aJ[aL]){return aJ[aL].call(U)}};U.addShortcut=function(aL,aM){aL=aL.toLowerCase();if(typeof aM==="string"){aJ[aL]=function(){B(X[aM],U.commands[aM]);return false}}else{aJ[aL]=aM}return U};U.removeShortcut=function(aL){delete aJ[aL.toLowerCase()];return U};R=function(aP){var aN,aQ,aO,aL,aM;if(ae.disableBlockRemove||aP.which!==8||!(aL=az.selectedRange())){return}if(!m.getSelection){aN=aL.parentElement();aO=aq[0].selection.createRange();aO.moveToElementText(aN);aO.setEndPoint("EndToStart",aL);aQ=aO.text.length}else{aN=aL.startContainer;aQ=aL.startOffset}if(aQ!==0||!(aM=ar())){return}while(aN!==aM){while(aN.previousSibling){aN=aN.previousSibling;if(aN.nodeType!==3||aN.nodeValue){return}}if(!(aN=aN.parentNode)){return}}if(!aM||k(aM).is("body")){return}U.clearBlockFormatting(aM);return false};ar=function(){var aL=V;while(!i.hasStyling(aL)||i.isInline(aL,true)){if(!(aL=aL.parentNode)||k(aL).is("body")){return}}return aL};U.clearBlockFormatting=function(aL){aL=aL||ar();if(!aL||k(aL).is("body")){return U}az.saveRange();aL.className="";at=null;k(aL).attr("style","");if(!k(aL).is("p,div,td")){i.convertElement(aL,"p")}az.restoreRange();return U};ai=function(aN){if(!T||(!T.hasHandler("valuechangedEvent")&&!ai.hasHandler)){return}var aM,aO=U.sourceMode(),aL=!aO&&az.hasSelection();aN=aN!==false&&!aq[0].getElementById("sceditor-start-marker");if(aC.timer){clearTimeout(aC.timer);aC.timer=false}if(aL&&aN){az.saveRange()}aM=aO?u.val():ak.html();if(aM!==ai.lastHtmlValue){ai.lastHtmlValue=aM;aj.trigger(k.Event("valuechanged",{rawValue:aO?U.val():aM}))}if(aL&&aN){az.removeMarkers()}};aG=function(){if(aC.timer){ai()}};aC=function(aO){var aP=aO.which,aN=aC.lastChar,aL=(aN===13||aN===32),aM=(aN===8||aN===46);aC.lastChar=aP;if(aP===13||aP===32){if(!aL){ai()}else{aC.triggerNextChar=true}}else{if(aP===8||aP===46){if(!aM){ai()}else{aC.triggerNextChar=true}}else{if(aC.triggerNextChar){ai();aC.triggerNextChar=false}}}if(aC.timer){clearTimeout(aC.timer)}aC.timer=setTimeout(function(){ai()},1500)};Y=function(){if(!v){U.updateOriginal()}v=false};aB()};f.locale={};f.command={get:function(t){return f.commands[t]||null},set:function(t,u){if(!t||!u){return false}u=k.extend(f.commands[t]||{},u);u.remove=function(){f.command.remove(t)};f.commands[t]=u;return this},remove:function(t){if(f.commands[t]){delete f.commands[t]}return this}};return f}.call(a,c,a,b),d!==undefined&&(b.exports=d))},function(b,a,c){var d;!(d=function(){var e={};var f=function(j){var i=this;var h=[];var k=function(l){return"signal"+l.charAt(0).toUpperCase()+l.slice(1)};var g=function(o,m){o=[].slice.call(o);var l,n,p=k(o.shift());for(l=0;l<h.length;l++){if(p in h[l]){n=h[l][p].apply(j,o);if(m){return n}}}};i.call=function(){g(arguments,false)};i.callOnlyFirst=function(){return g(arguments,true)};i.hasHandler=function(m){var l=h.length;m=k(m);while(l--){if(m in h[l]){return true}}return false};i.exists=function(l){if(l in e){l=e[l];return typeof l==="function"&&typeof l.prototype==="object"}return false};i.isRegistered=function(m){if(i.exists(m)){var l=h.length;while(l--){if(h[l] instanceof e[m]){return true}}}return false};i.register=function(l){if(!i.exists(l)||i.isRegistered(l)){return false}l=new e[l]();h.push(l);if("init" in l){l.init.call(j)}return true};i.deregister=function(n){var l,m=h.length,o=false;if(!i.isRegistered(n)){return o}while(m--){if(h[m] instanceof e[n]){l=h.splice(m,1)[0];o=true;if("destroy" in l){l.destroy.call(j)}}}return o};i.destroy=function(){var l=h.length;while(l--){if("destroy" in h[l]){h[l].destroy.call(j)}}h=[];j=null}};f.plugins=e;return f}.call(a,c,a,b),d!==undefined&&(b.exports=d))},function(b,a,c){var d;!(d=function(g){var i=c(1);var h=c(5);var m=c(7);var j=c(6);var l=j.ie;var n=l&&l<11;var f=function(o){return i("<p>",o.ownerDocument).append(o).html()};var e=function(v,x,p){var w,r,o,s,q,y="",u=v.startContainer,t=v.startOffset;if(u&&u.nodeType!==3){u=u.childNodes[t];t=0}o=s=t;while(p>y.length&&u&&u.nodeType===3){w=u.nodeValue;r=p-y.length;if(q){s=w.length;o=0}q=u;if(x){o=Math.max(s-r,0);t=o;y=w.substr(o,s-o)+y;u=q.previousSibling}else{s=Math.min(r,w.length);t=o+s;y+=w.substr(o,s);u=q.nextSibling}}return{node:q||u,offset:t,text:y}};var k=function(z,u){var A,r,s,y=u||z.contentDocument||z.document,t=z,q=!!z.getSelection,v="sceditor-start-marker",x="sceditor-end-marker",p="character",o=this;o.insertHTML=function(B,D){var C,E,w=o.selectedRange();if(!w){return false}if(q){if(D){B+=o.selectedHtml()+D}E=y.createElement("p");C=y.createDocumentFragment();E.innerHTML=B;while(E.firstChild){C.appendChild(E.firstChild)}o.insertNode(C)}else{w.pasteHTML(s(B,D,true));o.restoreRange()}};s=function(F,w,C){var E,D,G=y.createElement("div"),B=i(G);if(typeof F==="string"){if(w){F+=o.selectedHtml()+w}B.html(F)}else{B.append(F);if(w){B.append(o.selectedRange().extractContents()).append(w)}}if(!(E=G.lastChild)){return}while(!h.isInline(E.lastChild,true)){E=E.lastChild}if(h.canHaveChildren(E)){D=i(E);if(!E.lastChild){D.append("\u200B")}}if(l&&l<9&&i(E).is("img")){B.append("\u200B")}o.removeMarkers();(D||B).append(A(v)).append(A(x));if(C){return B.html()}return i(y.createDocumentFragment()).append(B.contents())[0]};o.insertNode=function(E,w){if(q){var C=s(E,w),B=o.selectedRange(),D=B.commonAncestorContainer;if(!C){return false}B.deleteContents();if(D&&D.nodeType!==3&&!h.canHaveChildren(D)){D.parentNode.insertBefore(C,D)}else{B.insertNode(C)}o.restoreRange()}else{o.insertHTML(f(E),w?f(w):null)}};o.cloneSelected=function(){var w=o.selectedRange();if(w){return q?w.cloneRange():w.duplicate()}};o.selectedRange=function(){var w,C,B=q?t.getSelection():y.selection;if(!B){return}if(B.getRangeAt&&B.rangeCount<=0){C=y.body;while(C.firstChild){C=C.firstChild}w=y.createRange();w.setStartBefore(C);B.addRange(w)}if(q&&B.rangeCount>0){w=B.getRangeAt(0)}if(!q&&B.type!=="Control"){w=B.createRange()}return r(w)?w:null};r=function(w){var B;if(w&&!q){B=w.parentElement()}return B?B.ownerDocument===y:true};o.hasSelection=function(){var w=q?t.getSelection():y.selection;if(q||!w){return w&&w.rangeCount>0}return w.type!=="None"&&r(w.createRange())};o.selectedHtml=function(){var B,w=o.selectedRange();if(w){if(q){B=y.createElement("p");B.appendChild(w.cloneContents());return B.innerHTML}else{if(w.text!==""&&w.htmlText){return w.htmlText}}}return""};o.parentNode=function(){var w=o.selectedRange();if(w){return w.parentElement?w.parentElement():w.commonAncestorContainer}};o.getFirstBlockParent=function(B){var w=function(C){if(!h.isInline(C,true)){return C}C=C?C.parentNode:null;return C?w(C):C};return w(B||o.parentNode())};o.insertNodeAt=function(D,C){var w=o.selectedRange(),B=o.cloneSelected();if(!B){return false}B.collapse(D);if(q){B.insertNode(C)}else{B.pasteHTML(f(C))}o.selectRange(w)};A=function(B){o.removeMarker(B);var w=y.createElement("span");w.id=B;w.style.lineHeight="0";w.style.display="none";w.className="sceditor-selection sceditor-ignore";w.innerHTML=" ";return w};o.insertMarkers=function(){o.insertNodeAt(true,A(v));o.insertNodeAt(false,A(x))};o.getMarker=function(w){return y.getElementById(w)};o.removeMarker=function(B){var w=o.getMarker(B);if(w){w.parentNode.removeChild(w)}};o.removeMarkers=function(){o.removeMarker(v);o.removeMarker(x)};o.saveRange=function(){o.insertMarkers()};o.selectRange=function(C){if(q){var D;var E=t.getSelection();var B=C.endContainer;if(!n&&C.collapsed&&B&&!h.isInline(B,true)){D=B.lastChild;while(D&&i(D).is(".sceditor-ignore")){D=D.previousSibling}if(i(D).is("br")){var w=y.createRange();w.setEndAfter(D);w.collapse(false);if(o.compare(C,w)){C.setStartBefore(D);C.collapse(true)}}}if(E){o.clear();E.addRange(C)}}else{C.select()}};o.restoreRange=function(){var B,D,E,C=o.selectedRange(),F=o.getMarker(v),w=o.getMarker(x);if(!F||!w||!C){return false}D=F.nextSibling===w;if(!q){C=y.body.createTextRange();B=y.body.createTextRange();E=F.previousSibling;if(F.nextSibling===w&&(!E||!h.isInline(E,true)||i(E).is("br"))){i(F).before("\u200B")}B.moveToElementText(F);C.setEndPoint("StartToStart",B);C.moveStart(p,0);B.moveToElementText(w);C.setEndPoint("EndToStart",B);C.moveEnd(p,0)}else{C=y.createRange();C.setStartBefore(F);C.setEndAfter(w)}if(D){C.collapse(true)}o.selectRange(C);o.removeMarkers()};o.selectOuterText=function(D,C){var E,w,B=o.cloneSelected();if(!B){return false}B.collapse(false);if(!q){B.moveStart(p,0-D);B.moveEnd(p,C)}else{E=e(B,true,D);w=e(B,false,C);B.setStart(E.node,E.offset);B.setEnd(w.node,w.offset)}o.selectRange(B)};o.getOuterText=function(C,B){var w=o.cloneSelected();if(!w){return""}w.collapse(!C);if(!q){if(C){w.moveStart(p,0-B)}else{w.moveEnd(p,B)}return w.text}return e(w,C,B).text};o.replaceKeyword=function(I,L,Q,C,E,K){if(!Q){I.sort(function(S,R){return S[0].length-R[0].length})}var F,O,P,D,H,M,G,N="[\\s\xA0\u2002\u2003\u2009]",J=I.length,B=E?1:0,w=C||I[J-1][0].length;if(E){if(!q){return false}w++}K=K||"";F=o.getOuterText(true,w);D=F.length;F+=K;if(L){F+=o.getOuterText(false,w)}while(J--){M=I[J][0];G=M.length;P=Math.max(0,D-G-B);if(E){O=F.substr(P).search(new RegExp("(?:"+N+")"+m.regex(M)+"(?="+N+")"))}else{O=F.indexOf(M,P)}if(O>-1){if(E){O+=P+1}if(O<=D&&O+G+B>=D){H=D-O;o.selectOuterText(H,G-H-(/^\S/.test(K)?1:0));o.insertHTML(I[J][1]);return true}}}return false};o.compare=function(C,B){var E=q?Range.END_TO_END:"EndToEnd",w=q?Range.START_TO_START:"StartToStart",D=q?"compareBoundaryPoints":"compareEndPoints";if(!B){B=o.selectedRange()}if(!C||!B){return !C&&!B}return r(C)&&r(B)&&C[D](E,B)===0&&C[D](w,B)===0};o.clear=function(){var w=q?t.getSelection():y.selection;if(w){if(w.removeAllRanges){w.removeAllRanges()}else{if(w.empty){w.empty()}}}}};return k}.call(a,c,a,b),d!==undefined&&(b.exports=d))},function(b,a,c){var d;!(d=function(g){var h=c(1);var f=c(6);var e={};var i={traverse:function(n,m,j,o,k){if(n){n=k?n.lastChild:n.firstChild;while(n){var l=k?n.previousSibling:n.nextSibling;if((!j&&m(n)===false)||(!o&&i.traverse(n,m,j,o,k)===false)||(j&&m(n)===false)){return false}n=l}}},rTraverse:function(l,k,j,m){this.traverse(l,k,j,m,true)},parseHTML:function(m,l){var j=[],k=(l||document).createElement("div");k.innerHTML=m;h.merge(j,k.childNodes);return j},hasStyling:function(k){var j=h(k);return k&&(!j.is("p,div")||k.className||j.attr("style")||!h.isEmptyObject(j.data()))},convertElement:function(l,k){var q,j,p=l.attributes,o=p.length,n=l.ownerDocument.createElement(k);while(o--){j=p[o];if(!f.ie||j.specified){if(f.ie<8&&/style/i.test(j.name)){i.copyCSS(l,n)}else{try{n.setAttribute(j.name,j.value)}catch(m){}}}}while((q=l.firstChild)){n.appendChild(q)}l.parentNode.replaceChild(n,l);return n},blockLevelList:"|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|",canHaveChildren:function(j){if(!/11?|9/.test(j.nodeType)){return false}return("|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|").indexOf("|"+j.nodeName.toLowerCase()+"|")<0},isInline:function(m,l){var k,j=(m||{}).nodeType||3;if(j!==1){return j===3}k=m.tagName.toLowerCase();if(k==="code"){return !l}return i.blockLevelList.indexOf("|"+k+"|")<0},copyCSS:function(k,j){j.style.cssText=k.style.cssText+j.style.cssText},fixNesting:function(k){var j=function(l){while(i.isInline(l.parentNode,true)){l=l.parentNode}return l};i.traverse(k,function(n){if(n.nodeType===1&&!i.isInline(n,true)&&i.isInline(n.parentNode,true)){var m=j(n),p=m.parentNode,o=i.extractContents(m,n),l=n;i.copyCSS(m,l);p.insertBefore(o,m);p.insertBefore(l,m)}})},findCommonAncestor:function(k,j){return h(k).parents().has(h(j)).first()},getSibling:function(k,j){if(!k){return null}return(j?k.previousSibling:k.nextSibling)||i.getSibling(k.parentNode,j)},removeWhiteSpace:function(s,v){var r,o,p,q,j,k,n,u,t=i.getSibling,m=i.isInline,l=s.firstChild;while(l){n=l.nextSibling;r=l.nodeValue;o=l.nodeType;if(o===1&&l.firstChild){k=h(l).css("whiteSpace");if(!/pre(\-wrap)?$/i.test(k)){i.removeWhiteSpace(l,/line$/i.test(k))}}if(o===3&&r){p=t(l);q=t(l,true);u=false;while(h(q).hasClass("sceditor-ignore")){q=t(q,true)}if(m(l)&&q){j=q;while(j.lastChild){j=j.lastChild}u=j.nodeType===3?/[\t\n\r ]$/.test(j.nodeValue):!m(j)}r=r.replace(/\u200B/g,"");if(!q||!m(q)||u){r=r.replace(v?/^[\t ]+/:/^[\t\n\r ]+/,"")}if(!p||!m(p)){r=r.replace(v?/[\t ]+$/:/[\t\n\r ]+$/,"")}if(!r.length){s.removeChild(l)}else{l.nodeValue=r.replace(v?/[\t ]+/g:/[\t\n\r ]+/g," ")}}l=n}},extractContents:function(l,j){var n,k=i.findCommonAncestor(l,j).get(0),o=false,m=false;n=function(p){var r,q=l.ownerDocument.createDocumentFragment();i.traverse(p,function(s){if(m||s===j){m=true;return false}if(s===l){o=true}if(h.contains(s,l)||(o&&h.contains(s,j))){r=s.cloneNode(false);r.appendChild(n(s));q.appendChild(r)}else{if(o&&!h.contains(q,s)){q.appendChild(s)}}},false);return q};return n(k)},getOffset:function(k){var j=0,l=0;while(k){j+=k.offsetLeft;l+=k.offsetTop;k=k.offsetParent}return{left:j,top:l}},getStyle:function(o,m){var j,n,k,l=o.style;if(!l){return""}if(!e[m]){e[m]=h.camelCase(m)}m=e[m];k=l[m];if("textAlign"===m){j=h(o);n=l.direction;k=k||j.css(m);if(j.parent().css(m)===k||j.css("display")!=="block"||j.is("hr")||j.is("th")){return""}if((/right/i.test(k)&&n==="rtl")||(/left/i.test(k)&&n==="ltr")){return""}}return k},hasStyle:function(m,l,k){var j=i.getStyle(m,l);if(!j){return false}return !k||j===k||(h.isArray(k)&&h.inArray(j,k)>-1)}};return i}.call(a,c,a,b),d!==undefined&&(b.exports=d))},function(b,a,c){var d;!(d=function(f,e){var g=c(1);var h=navigator.userAgent;e.ie=(function(){var k,i=3,l=document,m=l.createElement("div"),j=m.getElementsByTagName("i");do{m.innerHTML="<!--[if gt IE "+(++i)+"]><i></i><![endif]-->"}while(j[0]);if((l.documentMode&&l.all&&window.atob)){i=10}if(i===4&&l.documentMode){i=11}return i>4?i:k}());e.ios=/iPhone|iPod|iPad| wosbrowser\//i.test(h);e.isWysiwygSupported=(function(){var j,i,k,l=g('<p contenteditable="true">')[0].contentEditable;if(l===k||l==="inherit"){return false}i=/Opera Mobi|Opera Mini/i.test(h);if(/Android/i.test(h)){i=true;if(/Safari/.test(h)){j=/Safari\/(\d+)/.exec(h);i=(!j||!j[1]?true:j[1]<534)}}if(/ Silk\//i.test(h)){j=/AppleWebKit\/(\d+)/.exec(h);i=(!j||!j[1]?true:j[1]<534)}if(e.ios){i=/OS [0-4](_\d)+ like Mac/i.test(h)}if(/Firefox/i.test(h)){i=false}if(/OneBrowser/i.test(h)){i=false}if(navigator.vendor==="UCWEB"){i=false}return !i}())}.call(a,c,a,b),d!==undefined&&(b.exports=d))},function(b,a,c){var d;!(d=function(f,e){var g=/^(?:https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(?:\/\/)/i;e.regex=function(h){return h.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")};e.entities=function(j,i){if(!j){return j}var h={"&":"&amp;","<":"&lt;",">":"&gt;","  ":" &nbsp;","\r\n":"\n","\r":"\n","\n":"<br />"};if(i!==false){h['"']="&#34;";h["'"]="&#39;";h["`"]="&#96;"}j=j.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(k){return h[k]||k});return j};e.uriScheme=function(i){var k,j=/^[^\/]*:/i,h=window.location;if((!i||!j.test(i))||g.test(i)){return i}k=h.pathname.split("/");k.pop();return h.protocol+"//"+h.host+k.join("/")+"/"+i}}.call(a,c,a,b),d!==undefined&&(b.exports=d))},function(b,a,c){var d;!(d=function(){var e={html:'<!DOCTYPE html><html{attrs}><head><style>.ie * {min-height: auto !important} .ie table td {height:15px} body { color:#404040; padding: 0.5385em 0.4em; margin: 0; min-height: calc(100% - 20px) !important; font-family: \'Open Sans\', \'Helvetica Neue\', helvetica, arial, sans-serif; font-size: 17px; font-weight: 300; } p { margin: 0; }@supports (-ms-ime-align:auto) { * { min-height: auto !important; } }</style><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="link">{url}</label> <input type="text" id="image" placeholder="http://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" placeholder="http://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" placeholder="https://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" src="https://www.youtube.com/embed/{id}?wmode=opaque" data-youtube-id="{id}" frameborder="0" allowfullscreen></iframe>'};return function(f,i,h){var g=e[f];$.each(i,function(j,k){g=g.replace(new RegExp("\\{"+j+"\\}","g"),k)});if(h){g=$(g)}return g}}.call(a,c,a,b),d!==undefined&&(b.exports=d))},function(b,a,c){var d;!(d=function(h){var i=c(1);var f=c(6).ie;var e=c(8);var g=f&&f<11;var j={bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(n,m,q){var l=0,p=n.opts.fonts.split(","),o=i("<div />"),k=function(){q(i(this).data("font"));n.closeDropDown(true);return false};for(;l<p.length;l++){o.append(e("fontOpt",{font:p[l]},true).click(k))}n.createDropDown(m,"font-picker",o)},exec:function(k){var l=this;j.font._dropDown(l,k,function(m){l.execCommand("fontname",m)})},tooltip:"Font Name"},size:{_dropDown:function(n,l,p){var o=i("<div />"),k=function(q){p(i(this).data("size"));n.closeDropDown(true);q.preventDefault()};for(var m=1;m<=7;m++){o.append(e("sizeOpt",{size:m},true).click(k))}n.createDropDown(l,"fontsize-picker",o)},exec:function(k){var l=this;j.size._dropDown(l,k,function(m){l.execCommand("fontsize",m)})},tooltip:"Font Size"},color:{_dropDown:function(s,m,v){var q,u,o,k,l={r:255,g:255,b:255},t=i("<div />"),p=s.opts.colors?s.opts.colors.split("|"):new Array(21),r=[],n=j.color;if(!n._htmlCache){for(q=0;q<p.length;++q){k=p[q]?p[q].split(","):new Array(21);r.push('<div class="sceditor-color-column">');for(u=0;u<k.length;++u){o=k[u]||"#"+l.r.toString(16)+l.g.toString(16)+l.b.toString(16);r.push('<a href="#" class="sceditor-color-option" style="background-color: '+o+'" data-color="'+o+'"></a>');if(u%5===0){l.g-=51;l.b=255}else{l.b-=51}}r.push("</div>");if(q%5===0){l.r-=51;l.g=255;l.b=255}else{l.g=255;l.b=255}}n._htmlCache=r.join("")}t.append(n._htmlCache).find("a").click(function(w){v(i(this).attr("data-color"));s.closeDropDown(true);w.preventDefault()});s.createDropDown(m,"color-picker",t)},exec:function(k){var l=this;j.color._dropDown(l,k,function(m){l.execCommand("forecolor",m)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(k){var n,m,l=this;m=e("pastetext",{label:l._("Paste your text inside the following box:"),insert:l._("Insert")},true);m.find(".button").click(function(o){n=m.find("#txt").val();if(n){l.wysiwygEditorInsertText(n)}l.closeDropDown(true);o.preventDefault()});l.createDropDown(k,"pastetext",m)},tooltip:"Paste Text"},bulletlist:{exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},indent:{state:function(n,q){var m,p,r,o=i(q),k=o.parents("ul,ol,menu"),l=k.first();if(k.length>1||l.children().length>1){return 0}if(o.is("ul,ol,menu")){m=this.getRangeHelper().selectedRange();if(window.Range&&m instanceof Range){p=m.startContainer.parentNode;r=m.endContainer.parentNode;if(p!==p.parentNode.firstElementChild||(i(r).is("li")&&r!==r.parentNode.lastElementChild)){return 0}}else{return o.is("li,ul,ol,menu")?0:-1}}return -1},exec:function(){var l=this,k=i(l.getRangeHelper().getFirstBlockParent());l.focus();if(k.parents("ul,ol,menu")){l.execCommand("indent")}},tooltip:"Add indent"},outdent:{state:function(k,l){return i(l).is("ul,ol,menu")||i(l).parents("ul,ol,menu").length>0?0:-1},exec:function(){var l=this,k=i(l.getRangeHelper().getFirstBlockParent());if(k.parents("ul,ol,menu")){l.execCommand("outdent")}},tooltip:"Remove one indent"},table:{forceNewLineAfter:["table"],exec:function(k){var l=this,m=e("table",{rows:l._("Rows:"),cols:l._("Cols:"),insert:l._("Insert")},true);m.find(".button").click(function(r){var s,n,p=m.find("#rows").val()-0,q=m.find("#cols").val()-0,o="<table>";if(p<1||q<1){return}for(s=0;s<p;s++){o+="<tr>";for(n=0;n<q;n++){o+="<td>"+(g?"":"<br />")+"</td>"}o+="</tr>"}o+="</table>";l.wysiwygEditorInsertHtml(o);l.closeDropDown(true);r.preventDefault()});l.createDropDown(k,"inserttable",m)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{forceNewLineAfter:["code"],exec:function(){this.wysiwygEditorInsertHtml("<code>",(g?"":"<br />")+"</code>")},tooltip:"Code"},image:{exec:function(k){var l=this,m=e("image",{url:l._("URL:"),width:l._("Width (optional):"),height:l._("Height (optional):"),insert:l._("Insert")},true);m.find(".button").click(function(q){var r=m.find("#image").val(),p=m.find("#width").val(),n=m.find("#height").val(),o="";if(p){o+=' width="'+p+'"'}if(n){o+=' height="'+n+'"'}if(r){l.wysiwygEditorInsertHtml("<img"+o+' src="'+r+'" />')}l.closeDropDown(true);q.preventDefault()});l.createDropDown(k,"insertimage",m)},tooltip:"Insert an image"},email:{exec:function(k){var l=this,m=e("email",{label:l._("E-mail:"),desc:l._("Description (optional):"),insert:l._("Insert")},true);m.find(".button").click(function(o){var p=m.find("#email").val(),n=m.find("#des").val();if(p){l.focus();if(!l.getRangeHelper().selectedHtml()||n){n=n||p;l.wysiwygEditorInsertHtml('<a href="mailto:'+p+'">'+n+"</a>")}else{l.execCommand("createlink","mailto:"+p)}}l.closeDropDown(true);o.preventDefault()});l.createDropDown(k,"insertemail",m)},tooltip:"Insert an email"},link:{exec:function(k){var l=this,m=e("link",{url:l._("URL:"),desc:l._("Description (optional):"),ins:l._("Insert")},true);m.find(".button").click(function(o){var p=m.find("#link").val(),n=m.find("#des").val();if(p){l.focus();if(!l.getRangeHelper().selectedHtml()||n){n=n||p;l.wysiwygEditorInsertHtml('<a href="'+p+'">'+n+"</a>")}else{l.execCommand("createlink",p)}}l.closeDropDown(true);o.preventDefault()});l.createDropDown(k,"insertlink",m)},tooltip:"Insert a link"},unlink:{state:function(){var k=i(this.currentNode());return k.is("a")||k.parents("a").length>0?0:-1},exec:function(){var k=i(this.currentNode()),l=k.is("a")?k:k.parents("a").first();if(l.length){l.replaceWith(l.contents())}},tooltip:"Unlink"},quote:{forceNewLineAfter:["blockquote"],exec:function(l,m,n){var o="<blockquote>",k="</blockquote>";if(m){n=(n?"<cite>"+n+"</cite>":"");o=o+n+m+k;k=null}else{if(this.getRangeHelper().selectedHtml()===""){k=(g?"":"<br />")+k}}this.wysiwygEditorInsertHtml(o,k)},tooltip:"Insert a Quote"},emoticon:{exec:function(k){var l=this;var m=function(t){var s,q=l.opts.emoticonsCompat,p=l.getRangeHelper(),r=q&&p.getOuterText(true,1)!==" "?" ":"",w=q&&p.getOuterText(false,1)!==" "?" ":"",n=i("<div />"),v=i("<div />").appendTo(n),o=0,u=i.extend({},l.opts.emoticons.dropdown,t?l.opts.emoticons.more:{});i.each(u,function(){o++});o=Math.sqrt(o);i.each(u,function(y,x){v.append(i("<img />").attr({src:x.url||x,alt:y,title:x.tooltip||y}).click(function(){l.insert(r+i(this).attr("alt")+w,null,false).closeDropDown(true);return false}));if(v.children().length>=o){v=i("<div />").appendTo(n)}});if(!t&&l.opts.emoticons.more){s=i('<a class="sceditor-more">'+l._("More")+"</a>").click(function(){l.createDropDown(k,"more-emoticons",m(true));return false});n.append(s)}return n};l.createDropDown(k,"emoticons",m(false))},txtExec:function(k){j.emoticon.exec.call(this,k)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(l,k,o){var n,m=e("youtubeMenu",{label:l._("Video URL:"),insert:l._("Insert")},true);m.find(".button").click(function(p){var q=m.find("#link").val();if(q){n=q.match(/(?:v=|v\/|embed\/|youtu.be\/)(.{11})/);if(n){q=n[1]}if(/^[a-zA-Z0-9_\-]{11}$/.test(q)){o(q)}else{alert("Invalid YouTube video")}}l.closeDropDown(true);p.preventDefault()});l.createDropDown(k,"insertlink",m)},exec:function(k){var l=this;j.youtube._dropDown(l,k,function(m){l.wysiwygEditorInsertHtml(e("youtube",{id:m}))})},tooltip:"Insert a YouTube video"},date:{_date:function(n){var l=new Date(),m=l.getYear(),o=l.getMonth()+1,k=l.getDate();if(m<2000){m=1900+m}if(o<10){o="0"+o}if(k<10){k="0"+k}return n.opts.dateFormat.replace(/year/i,m).replace(/month/i,o).replace(/day/i,k)},exec:function(){this.insertText(j.date._date(this))},txtExec:function(){this.insertText(j.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var l=new Date(),k=l.getHours(),n=l.getMinutes(),m=l.getSeconds();if(k<10){k="0"+k}if(n<10){n="0"+n}if(m<10){m="0"+m}return k+":"+n+":"+m},exec:function(){this.insertText(j.time._time())},txtExec:function(){this.insertText(j.time._time())},tooltip:"Insert current time"},ltr:{state:function(k,l){return l&&l.style.direction==="ltr"},exec:function(){var l=this,m=l.getRangeHelper().getFirstBlockParent(),k=i(m);l.focus();if(!m||k.is("body")){l.execCommand("formatBlock","p");m=l.getRangeHelper().getFirstBlockParent();k=i(m);if(!m||k.is("body")){return}}if(k.css("direction")==="ltr"){k.css("direction","")}else{k.css("direction","ltr")}},tooltip:"Left-to-Right"},rtl:{state:function(k,l){return l&&l.style.direction==="rtl"},exec:function(){var l=this,m=l.getRangeHelper().getFirstBlockParent(),k=i(m);l.focus();if(!m||k.is("body")){l.execCommand("formatBlock","p");m=l.getRangeHelper().getFirstBlockParent();k=i(m);if(!m||k.is("body")){return}}if(k.css("direction")==="rtl"){k.css("direction","")}else{k.css("direction","rtl")}},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize())},txtExec:function(){this.maximize(!this.maximize())},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode()},txtExec:function(){this.toggleSourceMode()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},ignore:{}};return j}.call(a,c,a,b),d!==undefined&&(b.exports=d))},function(b,a,c){var d;!(d=function(e){var f=c(1);return{toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,locale:f("html").attr("lang")||"en",charset:"utf-8",emoticonsCompat:false,emoticonsEnabled:true,emoticonsRoot:"",emoticons:{},width:null,height:null,resizeEnabled:true,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:true,resizeWidth:true,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:false,disablePasting:false,readOnly:false,rtl:false,autofocus:false,autofocusEnd:true,autoExpand:false,autoUpdate:false,spellcheck:true,runWithoutWysiwygSupport:false,startInSourceMode:false,id:null,plugins:"",zIndex:null,bbcodeTrim:false,disableBlockRemove:false,parserOptions:{},dropDownCss:{}}}.call(a,c,a,b),d!==undefined&&(b.exports=d))}]);(function(b){var c=b.sceditor;var e=c.plugins;var d=c.dom;var a={bold:{txtExec:["<strong>","</strong>"]},italic:{txtExec:["<em>","</em>"]},underline:{txtExec:['<span style="text-decoration: underline;">',"</span>"]},strike:{txtExec:['<span style="text-decoration: line-through;">',"</span>"]},subscript:{txtExec:["<sub>","</sub>"]},superscript:{txtExec:["<sup>","</sup>"]},left:{txtExec:['<div style="text-align: left;">',"</div>"]},center:{txtExec:['<div style="text-align: center;">',"</div>"]},right:{txtExec:['<div style="text-align: right;">',"</div>"]},justify:{txtExec:['<div style="text-align: justify;">',"</div>"]},font:{txtExec:function(f){var g=this;c.command.get("font")._dropDown(g,f,function(h){g.insertText('<span style="font-family: '+h+';">',"</span>")})}},size:{txtExec:function(f){var g=this;c.command.get("size")._dropDown(g,f,function(h){g.insertText('<span style="font-size: '+h+';">',"</span>")})}},color:{txtExec:function(f){var g=this;c.command.get("color")._dropDown(g,f,function(h){g.insertText('<span style="color: '+h+';">',"</span>")})}},bulletlist:{txtExec:["<ul><li>","</li></ul>"]},orderedlist:{txtExec:["<ol><li>","</li></ol>"]},table:{txtExec:["<table><tr><td>","</td></tr></table>"]},horizontalrule:{txtExec:["<hr />"]},code:{txtExec:["<code>","</code>"]},image:{txtExec:function(g,h){var f=prompt(this._("Enter the image URL:"),h);if(f){this.insertText('<img src="'+f+'" />')}}},email:{txtExec:function(g,h){var f,j,i=h&&h.indexOf("@")>-1?null:h;f=prompt(this._("Enter the e-mail address:"),(i?"":h));j=prompt(this._("Enter the displayed text:"),i||f)||f;if(f){this.insertText('<a href="mailto:'+f+'">'+j+"</a>")}}},link:{txtExec:function(g,h){var i=h&&h.indexOf("http://")>-1?null:h,f=prompt(this._("Enter URL:"),(i?"http://":h)),j=prompt(this._("Enter the displayed text:"),i||f)||f;if(f){this.insertText('<a href="'+f+'">'+j+"</a>")}}},quote:{txtExec:["<blockquote>","</blockquote>"]},youtube:{txtExec:function(f){var g=this;c.command.get("youtube")._dropDown(g,f,function(h){g.insertText('<iframe width="560" height="315" src="https://www.youtube.com/embed/{id}?wmode=opaque" data-youtube-id="'+h+'" frameborder="0" allowfullscreen></iframe>')})}},rtl:{txtExec:['<div stlye="direction: rtl;">',"</div>"]},ltr:{txtExec:['<div stlye="direction: ltr;">',"</div>"]}};c.XHTMLSerializer=function(){var g=this;var f={indentStr:"\t"};var s=[];var n=0;var o,j,m,h,q,l,r,p,i,k;o=function(u){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return !u?"":u.replace(/[&<>"]/g,function(v){return t[v]||v})};j=function(t){return t.replace(/[\r\n]/," ").replace(/[^\S|\u00A0]+/g," ")};g.serialize=function(t,u){s=[];if(u){t=t.firstChild;while(t){m(t);t=t.nextSibling}}else{m(t)}return s.join("")};m=function(v,t){switch(v.nodeType){case 1:var u=v.nodeName.toLowerCase();if(u==="!"){r(v)}else{q(v,t)}break;case 3:p(v,t);break;case 4:l(v);break;case 8:r(v);break;case 9:case 11:h(v);break;case 2:case 5:case 6:case 7:case 10:case 12:break}};h=function(t){var u=t.firstChild;while(u){m(u);u=u.nextSibling}};q=function(x,C){var t,z,y,v=x.nodeName.toLowerCase(),D=v==="iframe",w=x.attributes.length,B=x.firstChild,u=C||/pre(?:\-wrap)?$/i.test(b(x).css("whiteSpace")),A=!x.firstChild&&!d.canHaveChildren(x)&&!D;if(b(x).hasClass("sceditor-ignore")){return}i("<"+v,!C&&k(x));while(w--){z=x.attributes[w];if(!c.ie||z.specified||(v==="input"&&z.name==="value")){if(c.ie<8&&/style/i.test(z.name)){y=x.style.cssText}else{y=z.value}i(" "+z.name.toLowerCase()+'="'+o(y)+'"',false)}}i(A?" />":">",false);if(!D){t=B}while(t){n++;m(t,u);t=t.nextSibling;n--}if(!A){i("</"+v+">",!u&&!D&&k(x)&&B&&k(B))}};l=function(t){i("<![CDATA["+o(t.nodeValue)+"]]>")};r=function(t){i("<!-- "+o(t.nodeValue)+" -->")};p=function(u,t){var v=u.nodeValue;if(!t){v=j(v)}if(v){i(o(v),!t&&k(u))}};i=function(v,t){var u=n;if(t!==false){if(s.length){s.push("\n")}while(u--){s.push(f.indentStr)}}s.push(v)};k=function(u){var t=u.previousSibling;if(u.nodeType!==1&&t){return !d.isInline(t)}if(!t&&!d.isInline(u.parentNode)){return true}return !d.isInline(u)}};e.xhtml=function(){var g=this;var f={};var i={};var h,k,l,o,j,m,n;g.init=function(){if(!b.isEmptyObject(e.xhtml.converters||{})){b.each(e.xhtml.converters,function(p,q){b.each(q.tags,function(r){if(!f[r]){f[r]=[]}f[r].push(q)})})}this.commands=b.extend(true,{},a,this.commands)};g.signalToSource=function(p,q){q=q.jquery?q[0]:q;h(q);o(q);m(q);n(q);return(new c.XHTMLSerializer()).serialize(q,true)};g.signalToWysiwyg=function(p){return p};g.convertTagTo=d.convertElement;k=function(q,p,r){if(!f[q]){return}b.each(f[q],function(s,t){if(t.tags[q]){b.each(t.tags[q],function(u,v){if(!r.getAttributeNode){return}u=r.getAttributeNode(u);if(!u||(c.ie<8&&!u.specified)){return}if(v&&b.inArray(u.value,v)<0){return}t.conv.call(g,r,p)})}else{if(t.conv){t.conv.call(g,r,p)}}})};h=function(p){d.traverse(p,function(s){var q=b(s),r=s.nodeName.toLowerCase();k("*",q,s);k(r,q,s)},true)};l=function(r,s){var u=r.childNodes,q=r.nodeName.toLowerCase(),p=r.nodeValue,t=u.length;if(s&&q==="br"){return true}if(b(r).hasClass("sceditor-ignore")){return true}if(!d.canHaveChildren(r)){return false}if(p&&/\S|\u00A0/.test(p)){return false}while(t--){if(!l(u[t],s&&!r.previousSibling&&!r.nextSibling)){return false}}return true};o=function(p){d.traverse(p,function(s){var y,r=s.nodeName.toLowerCase(),z=s.parentNode,x=s.nodeType,t=!d.isInline(s),q=s.previousSibling,w=s.nextSibling,v=z===p,C=!q&&!w,A=r!=="iframe"&&l(s,v&&C&&r!=="br"),D=s.ownerDocument,B=e.xhtml.allowedTags,u=e.xhtml.disallowedTags;if(x===3){return}if(x===4){r="!cdata"}else{if(r==="!"||x===8){r="!comment"}}if(A){y=true}else{if(B&&B.length){y=(b.inArray(r,B)<0)}else{if(u&&u.length){y=(b.inArray(r,u)>-1)}}}if(y){if(!A){if(t&&q&&d.isInline(q)){z.insertBefore(D.createTextNode(" "),s)}while(s.firstChild){z.insertBefore(s.firstChild,w)}if(t&&w&&d.isInline(w)){z.insertBefore(D.createTextNode(" "),w)}}z.removeChild(s)}},true)};j=function(p,r){var q={};if(p){b.extend(q,p)}if(!r){return q}b.each(r,function(t,s){if(b.isArray(s)){q[t]=b.merge(q[t]||[],s)}else{if(!q[t]){q[t]=null}}});return q};n=function(p){var s=[];var q=function(){if(s.length){b("<p>",p.ownerDocument).insertBefore(s[0]).append(s);s=[]}};d.removeWhiteSpace(p);var r=p.firstChild;while(r){if(d.isInline(r)&&!b(r).is(".sceditor-ignore")){s.push(r)}else{q()}r=r.nextSibling}q()};m=function(t){var q,w,z,x,r,v,y=e.xhtml.allowedAttribs,s=y&&!b.isEmptyObject(y),p=e.xhtml.disallowedAttribs,u=p&&!b.isEmptyObject(p);i={};d.traverse(t,function(A){if(!A.attributes){return}q=A.nodeName.toLowerCase();x=A.attributes.length;if(x){if(!i[q]){if(s){i[q]=j(y["*"],y[q])}else{i[q]=j(p["*"],p[q])}}while(x--){w=A.attributes[x];z=w.name;r=i[q][z];v=false;if(s){v=r!==null&&(!b.isArray(r)||b.inArray(w.value,r)<0)}else{if(u){v=r===null||(b.isArray(r)&&b.inArray(w.value,r)>-1)}}if(v){A.removeAttribute(z)}}}})}};e.xhtml.converters=[{tags:{"*":{width:null}},conv:function(g,f){f.css("width",f.attr("width")).removeAttr("width")}},{tags:{"*":{height:null}},conv:function(g,f){f.css("height",f.attr("height")).removeAttr("height")}},{tags:{li:{value:null}},conv:function(g,f){if(c.ie<8){g.removeAttribute("value")}else{f.removeAttr("value")}}},{tags:{"*":{text:null}},conv:function(g,f){f.css("color",f.attr("text")).removeAttr("text")}},{tags:{"*":{color:null}},conv:function(g,f){f.css("color",f.attr("color")).removeAttr("color")}},{tags:{"*":{face:null}},conv:function(g,f){f.css("fontFamily",f.attr("face")).removeAttr("face")}},{tags:{"*":{align:null}},conv:function(g,f){f.css("textAlign",f.attr("align")).removeAttr("align")}},{tags:{"*":{border:null}},conv:function(g,f){f.css("borderWidth",f.attr("border")).removeAttr("border")}},{tags:{applet:{name:null},img:{name:null},layer:{name:null},map:{name:null},object:{name:null},param:{name:null}},conv:function(g,f){if(!f.attr("id")){f.attr("id",f.attr("name"))}f.removeAttr("name")}},{tags:{"*":{vspace:null}},conv:function(g,f){f.css("marginTop",f.attr("vspace")-0).css("marginBottom",f.attr("vspace")-0).removeAttr("vspace")}},{tags:{"*":{hspace:null}},conv:function(g,f){f.css("marginLeft",f.attr("hspace")-0).css("marginRight",f.attr("hspace")-0).removeAttr("hspace")}},{tags:{hr:{noshade:null}},conv:function(g,f){f.css("borderStyle","solid").removeAttr("noshade")}},{tags:{"*":{nowrap:null}},conv:function(g,f){f.css("white-space","nowrap").removeAttr("nowrap")}},{tags:{big:null},conv:function(f){b(this.convertTagTo(f,"span")).css("fontSize","larger")}},{tags:{small:null},conv:function(f){b(this.convertTagTo(f,"span")).css("fontSize","smaller")}},{tags:{b:null},conv:function(f){b(this.convertTagTo(f,"strong"))}},{tags:{u:null},conv:function(f){b(this.convertTagTo(f,"span")).css("textDecoration","underline")}},{tags:{i:null},conv:function(f){b(this.convertTagTo(f,"em"))}},{tags:{s:null,strike:null},conv:function(f){b(this.convertTagTo(f,"span")).css("textDecoration","line-through")}},{tags:{dir:null},conv:function(f){this.convertTagTo(f,"ul")}},{tags:{center:null},conv:function(f){b(this.convertTagTo(f,"div")).css("textAlign","center")}},{tags:{font:{size:null}},conv:function(h,f){var g=f.css("fontSize"),i=g;if(i!=="+0"){if(c.ie<9){i=10;if(g>1){i=13}if(g>2){i=16}if(g>3){i=18}if(g>4){i=24}if(g>5){i=32}if(g>6){i=48}}f.css("fontSize",i)}f.removeAttr("size")}},{tags:{font:null},conv:function(f){this.convertTagTo(f,"span")}},{tags:{"*":{type:["_moz"]}},conv:function(g,f){f.removeAttr("type")}},{tags:{"*":{_moz_dirty:null}},conv:function(g,f){f.removeAttr("_moz_dirty")}},{tags:{"*":{_moz_editor_bogus_node:null}},conv:function(g,f){f.remove()}}];e.xhtml.allowedAttribs={};e.xhtml.disallowedAttribs={};e.xhtml.allowedTags=[];e.xhtml.disallowedTags=[]}(jQuery));